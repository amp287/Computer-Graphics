<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/x-glsl" id="RimLightFragShader">
        precision highp float;
        uniform vec2 resolution;
        uniform mat4 modelViewMatrix;
        uniform vec3 color;
        uniform vec3 lightPos;
        varying vec3 fPosition;
        varying vec3 fNormal;

        float rimlight(){
          vec3 n = normalize(mat3(modelViewMatrix) * fNormal);
          vec3 p = vec3(modelViewMatrix * vec4(fPosition, 1.0));
          vec3 v = normalize(-p);
          float vdn = 1.0 - max(dot(v, n), 0.0);
          float sm = smoothstep(0.7, 5.0, vdn);
          return sm;
        }

        void main()
        {
          vec3 N = normalize(fNormal);
          vec3 L = normalize(lightPos - fPosition);

          float lambertian = max(dot(N, L), 0.0);
          //vec3 color = vec3(140, 179, 242);
          float rim = rimlight();
          gl_FragColor = vec4( 0.4 * lambertian + 0.0025 * color + 0.02 * rim * vec3(244, 110, 66) , 1.0);
        }
    </script>
    
    <script type="text/x-glsl" id="VertexShader">
        //attribute vec3 position;
        //attribute vec3 normal;
        //uniform mat3 normalMatrix;
        //uniform mat4 modelViewMatrix;
        //uniform mat4 projectionMatrix;
        varying vec3 fNormal;
        varying vec3 fPosition;


        void main(void)
        {
           fNormal = normalize(normalMatrix * normal);
           vec4 pos = modelViewMatrix * vec4(position, 1.0);
           fPosition = pos.xyz;
           gl_Position = (projectionMatrix * pos);
        }
    </script>
    
    <script src="libs/keyboard.js"></script>
    <script src="libs/three.min.js"></script>
    <script src="libs/ColladaLoader.js"></script>
    <script src="libs/physi.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/enemies.js"></script>
    <script src="maps/map1.js"></script>
    <script src="js/map_gen.js"></script>
    <script src="js/player.js"></script>
    <script src="js/customShader.js"></script>
    <script src="js/game.js"></script>
    <link href="css/game.css" rel="stylesheet"/>
</head>
<body>
    <div id="hud">
        <img src="images/heartContainer.png" id = "h1">
        <img src="images/heartContainer.png" id = "h2">
        <img src="images/heartContainer.png" id = "h3">
    </div>
</body>
</html>